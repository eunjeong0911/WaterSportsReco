# ğŸŒŠ í•´ì–‘ë ˆì € ì¶”ì²œ í”Œë«í¼ ê¸°ìˆ  ì„¤ê³„ë„

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### í”„ë¡œì íŠ¸ëª…
Water Sports Recommendation Platform (í•´ì–‘ë ˆì € ì¶”ì²œ í”Œë«í¼)

### ëª©ì 
- ì‹¤ì‹œê°„ í•´ì–‘ ì •ë³´(ìˆ˜ì˜¨, íŒŒê³ , ì¡°ë¥˜)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ í•´ì–‘ë ˆì € í™œë™ ì¶”ì²œ
- ì§€ì—­ë³„ í•´ì–‘ë ˆì € ì‚¬ì—…ì¥ ê²€ìƒ‰ ë° í‘œì‹œ
- AI ì±—ë´‡ì„ í†µí•œ ë§ì¶¤í˜• ë ˆì € ì¶”ì²œ ì„œë¹„ìŠ¤

### ì£¼ìš” ê¸°ëŠ¥
- ğŸ—ºï¸ ì¹´ì¹´ì˜¤ë§µ ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ì§€ë„
- ğŸŒŠ ì‹¤ì‹œê°„ í•´ì–‘ ì •ë³´ í‘œì‹œ (ìˆ˜ì˜¨, íŒŒê³ , ì¡°ë¥˜)
- ğŸ„ ì§€ì—­ë³„ í•´ì–‘ë ˆì € ì‚¬ì—…ì¥ ê²€ìƒ‰ ë° í‘œì‹œ
- ğŸ¯ í™œë™ë³„ í•„í„°ë§ (ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™, ì¹´ì•½, ìš”íŠ¸ ë“±)
- ğŸ’¬ AI ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤
- ğŸ“ ì‹œ/ë„ ë‹¨ìœ„ ì§€ì—­ ì„ íƒ ë° ì• ë‹ˆë©”ì´ì…˜
- ğŸ“ í™œë™ë³„ ìƒ‰ìƒ êµ¬ë¶„ ë§ˆì»¤ í‘œì‹œ

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„

```mermaid
graph TB
    subgraph "Frontend"
        A["React App"]
        B["MapView<br/>ì¹´ì¹´ì˜¤ë§µ"]
        C["ChatWindow<br/>AI ì±—íŒ…"]
        D["RegionFilter<br/>ì§€ì—­ ì„ íƒ"]
        E["ActivityFilter<br/>í™œë™ í•„í„°"]
    end
    
    subgraph "Backend"
        F["FastAPI"]
    end
    
    subgraph "External APIs"
        G["KMA API<br/>ê¸°ìƒì²­ í•´ì–‘ì •ë³´"]
        H["KHOA API<br/>êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì›"]
        I["Kakao Local API<br/>ì‚¬ì—…ì¥ ê²€ìƒ‰"]
    end
    
    A --> B
    A --> C
    A --> D
    A --> E
    
    B --> F
    C --> F
    
    F --> G
    F --> H
    F --> I
    
    style A fill:#c8d5ff
    style F fill:#c8f7c5
    style G fill:#f0f0f0
    style H fill:#f0f0f0
    style I fill:#f0f0f0
```

### ìƒì„¸ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ë„

```mermaid
graph TD
    subgraph "Frontend (React)"
        A["React App"]
        B["MapView<br/>ì¹´ì¹´ì˜¤ë§µ ì§€ë„"]
        C["ChatWindow<br/>AI ì±—ë´‡"]
        D["RegionFilter<br/>ì§€ì—­ ì„ íƒ"]
        E["ActivityFilter<br/>í™œë™ í•„í„°"]
        F["Header<br/>í—¤ë”"]
        G["Footer<br/>í‘¸í„°"]
        H["InfoCard<br/>ì •ë³´ ì¹´ë“œ"]
    end
    
    A --> B
    A --> C
    A --> D
    A --> E
    A --> F
    A --> G
    A --> H
    
    B -.->|API í˜¸ì¶œ| I["API í˜¸ì¶œ"]
    C -.->|API í˜¸ì¶œ| I
    
    subgraph "Backend"
        I --> J["FastAPI"]
    end
    
    subgraph "External APIs"
        J --> K["KMA API"]
        J --> L["KHOA API"]
        J --> M["Kakao Local API"]
    end
    
    style A fill:#c8d5ff
    style J fill:#c8f7c5
    style K fill:#f0f0f0
    style L fill:#f0f0f0
    style M fill:#f0f0f0
```

### ê¸°ìˆ  ìŠ¤íƒ

#### Frontend
- **Framework**: React 18.3.1
- **Build Tool**: Vite 5.4.1
- **HTTP Client**: Axios 1.11.0
- **Map API**: ì¹´ì¹´ì˜¤ë§µ JavaScript API

#### Backend
- **Framework**: FastAPI 0.111.0
- **Web Server**: Uvicorn 0.30.1
- **HTTP Client**: httpx 0.27.0
- **Data Validation**: Pydantic 2.8.2
- **Environment**: python-dotenv 1.0.1

#### External APIs
- **ê¸°ìƒì²­ í•´ì–‘ê´€ì¸¡ API**: ì‹¤ì‹œê°„ í•´ì–‘ ì •ë³´
- **ì¹´ì¹´ì˜¤ ë¡œì»¬ API**: ì‚¬ì—…ì¥ ê²€ìƒ‰
- **êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì› API**: ì¡°ìœ„/í•´ì–‘ ì •ë³´

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
water-sports-reco/
â”œâ”€â”€ backend/                          # ë°±ì—”ë“œ ì„œë²„
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                   # FastAPI ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”‚   â”œâ”€â”€ config.py                 # í™˜ê²½ ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ schemas.py                # Pydantic ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ deps.py                   # ì˜ì¡´ì„± ì£¼ì…
â”‚   â”‚   â””â”€â”€ services/                 # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â”œâ”€â”€ kma_client.py         # ê¸°ìƒì²­ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â”œâ”€â”€ khoa_client.py        # êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì› API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â””â”€â”€ kakao_local_client.py # ì¹´ì¹´ì˜¤ ë¡œì»¬ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ requirements.txt              # Python ì˜ì¡´ì„±
â”‚   â””â”€â”€ .env                         # í™˜ê²½ ë³€ìˆ˜ (ìˆ˜ë™ ìƒì„± í•„ìš”)
â”œâ”€â”€ frontend/                         # í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx                   # ë©”ì¸ React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ main.jsx                  # React ì•± ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.js             # Axios HTTP í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ components/               # React ì»´í¬ë„ŒíŠ¸ë“¤
â”‚   â”‚   â”‚   â”œâ”€â”€ MapView.jsx           # ì¹´ì¹´ì˜¤ë§µ ì§€ë„ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.jsx        # AI ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ RegionFilter.jsx      # ì§€ì—­ ì„ íƒ í•„í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ ActivityFilter.jsx    # í™œë™ ì„ íƒ í•„í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.jsx            # í—¤ë” ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.jsx            # í‘¸í„° ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ InfoCard.jsx          # ì •ë³´ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â””â”€â”€ useKakaoLoader.js     # ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ í›…
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ geo/
â”‚   â”‚       â””â”€â”€ korea_sido_simple.json # ì‹œ/ë„ ê²½ê³„ GeoJSON ë°ì´í„°
â”‚   â”œâ”€â”€ package.json                  # Node.js ì˜ì¡´ì„±
â”‚   â””â”€â”€ .env                         # í™˜ê²½ ë³€ìˆ˜ (ìˆ˜ë™ ìƒì„± í•„ìš”)
â””â”€â”€ README.md                         # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
```

---

## ğŸ”§ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### Backend ì•„í‚¤í…ì²˜

#### 1. API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°
```python
# main.py - API ë¼ìš°í„° ì •ì˜
@app.get("/api/stations")           # ëª¨ë“  í•´ì–‘ ê´€ì¸¡ì†Œ ë°ì´í„°
@app.get("/api/conditions")         # íŠ¹ì • ì§€ì  í•´ì–‘ ì¡°ê±´
@app.get("/api/places/in-rect")     # ì˜ì—­ ë‚´ í•´ì–‘ë ˆì € ì‚¬ì—…ì¥ ê²€ìƒ‰
```

#### 2. ë°ì´í„° ëª¨ë¸ (Pydantic Schemas)
```python
# schemas.py
class ConditionResponse(BaseModel):
    spotName: str
    lat: float
    lon: float
    sst: Optional[float]           # í•´ìˆ˜ë©´ ì˜¨ë„
    wave_height: Optional[float]   # ìœ ì˜íŒŒê³ 
    current_speed: Optional[float] # ì¡°ë¥˜ì†ë„
    observed_at: Optional[str]     # ê´€ì¸¡ì‹œê°
    source: str = "KMA"

class PlaceResponse(BaseModel):
    id: str
    name: str
    activity: str                  # í™œë™ ë¶„ë¥˜
    category: str
    phone: str
    address: str
    road_address: str
    x: float                       # ê²½ë„
    y: float                       # ìœ„ë„
    place_url: str
    distance: str
    source: str
```

#### 3. ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸ ì„¤ê³„

##### ê¸°ìƒì²­ í•´ì–‘ê´€ì¸¡ API (KMA)
```python
# kma_client.py
async def fetch_all_stations()      # ì „ì²´ ê´€ì¸¡ì†Œ ë°ì´í„°
async def fetch_station_by_id()     # íŠ¹ì • ê´€ì¸¡ì†Œ ë°ì´í„°
def _parse_sea_obs_all()           # CSV ì‘ë‹µ íŒŒì‹±
```

##### ì¹´ì¹´ì˜¤ ë¡œì»¬ API
```python
# kakao_local_client.py
class KakaoLocalClient:
    async def search_places_in_rect()    # ì˜ì—­ ë‚´ ì¥ì†Œ ê²€ìƒ‰
    async def _search_by_keyword()       # í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰
    
# í™œë™ë³„ ê²€ìƒ‰ í‚¤ì›Œë“œ ë§¤í•‘
ACTIVITY_KEYWORDS = {
    "surfing": ["ì„œí•‘", "ì„œí•‘ìƒµ", "ì„œí•‘ìŠ¤ì¿¨"],
    "scuba": ["ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™", "ë‹¤ì´ë¹™ ì„¼í„°"],
    "kayak": ["ì¹´ì•½", "ì¹´ëˆ„", "SUP"],
    "yacht": ["ìš”íŠ¸ íˆ¬ì–´", "ì„¸ì¼ë§ ìŠ¤ì¿¨"],
    # ... ê¸°íƒ€ í™œë™ë“¤
}
```

### Frontend ì•„í‚¤í…ì²˜

#### 1. ì£¼ìš” React ì»´í¬ë„ŒíŠ¸

##### MapView ì»´í¬ë„ŒíŠ¸
```jsx
// MapView.jsx - í•µì‹¬ ì§€ë„ ì»´í¬ë„ŒíŠ¸
const MapView = ({ onRegionSelect }) => {
    // ìƒíƒœ ê´€ë¦¬
    const [stations, setStations] = useState([]);      // í•´ì–‘ ê´€ì¸¡ì†Œ
    const [places, setPlaces] = useState([]);          // ì‚¬ì—…ì¥ ë°ì´í„°
    const [selectedRegion, setSelectedRegion] = useState(null);
    const [selectedActivity, setSelectedActivity] = useState("marine_info");
    
    // í•µì‹¬ ê¸°ëŠ¥
    const fetchStations = async () => { /* í•´ì–‘ì •ë³´ ë¡œë“œ */ };
    const fetchPlaces = async (activity) => { /* ì‚¬ì—…ì¥ ì •ë³´ ë¡œë“œ */ };
    const handleRegionSelect = (regionName) => { /* ì§€ì—­ ì„ íƒ ì²˜ë¦¬ */ };
    const handleActivitySelect = (activity) => { /* í™œë™ ì„ íƒ ì²˜ë¦¬ */ };
};
```

##### ì¹´ì¹´ì˜¤ë§µ API í›…
```javascript
// useKakaoLoader.js - ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ê´€ë¦¬
const useKakaoLoader = (appKey) => {
    const [loaded, setLoaded] = useState(false);
    const [error, setError] = useState(null);
    
    useEffect(() => {
        // ë™ì  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ë° ì—ëŸ¬ ì²˜ë¦¬
        const script = document.createElement('script');
        script.src = `//dapi.kakao.com/v2/maps/sdk.js?appkey=${appKey}&libraries=services`;
        // ë¡œë“œ ì™„ë£Œ/ì‹¤íŒ¨ ì²˜ë¦¬
    }, [appKey]);
    
    return { loaded, error };
};
```

#### 2. ìƒíƒœ ê´€ë¦¬ íë¦„

```mermaid
graph TD
    subgraph "Frontend State Flow"
        A["App ì»´í¬ë„ŒíŠ¸"]
        B["MapView<br/>ì§€ë„ ì»´í¬ë„ŒíŠ¸"]
        C["ChatWindow<br/>AI ì±—ë´‡"]
        D["RegionFilter<br/>ì§€ì—­ í•„í„°"]
        E["ActivityFilter<br/>í™œë™ í•„í„°"]
    end
    
    A --> B
    A --> C
    B --> D
    B --> E
    
    D -->|ì§€ì—­ ì„ íƒ| F["ì§€ì—­ ìƒíƒœ ì—…ë°ì´íŠ¸"]
    E -->|í™œë™ ì„ íƒ| G["í™œë™ ìƒíƒœ ì—…ë°ì´íŠ¸"]
    
    F --> H["API í˜¸ì¶œ"]
    G --> H
    
    subgraph "API Layer"
        H --> I["Backend<br/>FastAPI"]
    end
    
    I --> J["ë°ì´í„° ì‘ë‹µ"]
    J --> K["ë§ˆì»¤ ì—…ë°ì´íŠ¸"]
    K --> B
    
    B -->|ì„ íƒëœ ì§€ì—­| A
    A -->|ì§€ì—­ ì •ë³´| C
    
    style A fill:#c8d5ff
    style I fill:#c8f7c5
    style H fill:#fff2cc
    style J fill:#fff2cc
```

### ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph LR
    subgraph "ì‚¬ìš©ì ì¸í„°ë™ì…˜"
        A["ì‚¬ìš©ì"]
        B["ì§€ì—­ ì„ íƒ"]
        C["í™œë™ ì„ íƒ"]
        D["ë§ˆì»¤ í´ë¦­"]
    end
    
    A --> B
    A --> C
    A --> D
    
    subgraph "Frontend ì²˜ë¦¬"
        E["RegionFilter"]
        F["ActivityFilter"]
        G["MapView"]
    end
    
    B --> E
    C --> F
    D --> G
    
    subgraph "API ìš”ì²­"
        H["í•´ì–‘ì •ë³´ ìš”ì²­"]
        I["ì‚¬ì—…ì¥ ê²€ìƒ‰ ìš”ì²­"]
        J["ìƒì„¸ì •ë³´ ìš”ì²­"]
    end
    
    E --> H
    F --> I
    G --> J
    
    subgraph "Backend ì²˜ë¦¬"
        K["FastAPI<br/>ë¼ìš°í„°"]
    end
    
    H --> K
    I --> K
    J --> K
    
    subgraph "ì™¸ë¶€ API"
        L["KMA API<br/>ê¸°ìƒì²­"]
        M["Kakao Local API<br/>ì‚¬ì—…ì¥"]
        N["KHOA API<br/>í•´ì–‘ì¡°ì‚¬ì›"]
    end
    
    K --> L
    K --> M
    K --> N
    
    subgraph "ì‘ë‹µ ì²˜ë¦¬"
        O["ë°ì´í„° íŒŒì‹±"]
        P["JSON ì‘ë‹µ"]
        Q["ì§€ë„ ì—…ë°ì´íŠ¸"]
    end
    
    L --> O
    M --> O
    N --> O
    O --> P
    P --> Q
    Q --> A
    
    style A fill:#ffe6e6
    style K fill:#c8f7c5
    style L fill:#f0f0f0
    style M fill:#f0f0f0
    style N fill:#f0f0f0
```

---

## ğŸ”— API ì—°ë™ ì„¤ê³„

### API ì—°ë™ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Frontend"
        A["MapView<br/>ì§€ë„ ì»´í¬ë„ŒíŠ¸"]
        B["ChatWindow<br/>AI ì±—ë´‡"]
    end
    
    subgraph "Backend FastAPI"
        C["API Router<br/>/api/stations<br/>/api/conditions<br/>/api/places/in-rect"]
        D["HTTP Client<br/>httpx.AsyncClient"]
        E["Data Parser<br/>ì‘ë‹µ íŒŒì‹±"]
    end
    
    subgraph "External APIs"
        F["KMA API<br/>ê¸°ìƒì²­ í•´ì–‘ê´€ì¸¡<br/>sea_obs.php"]
        G["KHOA API<br/>êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì›<br/>ì¡°ìœ„ ì •ë³´"]
        H["Kakao Local API<br/>ì‚¬ì—…ì¥ ê²€ìƒ‰<br/>keyword.json"]
    end
    
    A -->|HTTP Request| C
    B -->|HTTP Request| C
    
    C --> D
    D --> F
    D --> G  
    D --> H
    
    F --> E
    G --> E
    H --> E
    
    E --> C
    C -->|JSON Response| A
    C -->|JSON Response| B
    
    style A fill:#c8d5ff
    style B fill:#c8d5ff
    style C fill:#c8f7c5
    style D fill:#c8f7c5
    style E fill:#c8f7c5
    style F fill:#f0f0f0
    style G fill:#f0f0f0
    style H fill:#f0f0f0
```

### 1. ê¸°ìƒì²­ í•´ì–‘ê´€ì¸¡ API

#### ìš”ì²­ êµ¬ì¡°
```http
GET https://apihub.kma.go.kr/api/typ01/url/sea_obs.php
Parameters:
- stn: ê´€ì¸¡ì†Œ ID (0 = ì „ì²´)
- authKey: API ì¸ì¦í‚¤
- tm: ê´€ì¸¡ì‹œê° (ì„ íƒì‚¬í•­)
```

#### ì‘ë‹µ íŒŒì‹±
```python
# CSV í˜•íƒœ ì‘ë‹µì„ íŒŒì‹±í•˜ì—¬ JSONìœ¼ë¡œ ë³€í™˜
def _parse_sea_obs_all(text: str) -> List[Dict[str, Any]]:
    # TP, TM, STN_ID, STN_KO, LON, LAT, WH, WD, WS, WS_GST, TW, TA, PA, HM
    # ê° í•„ë“œë¥¼ ì ì ˆí•œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜
```

### 2. ì¹´ì¹´ì˜¤ ë¡œì»¬ API

#### ê²€ìƒ‰ ì „ëµ
```python
# í™œë™ë³„ í‚¤ì›Œë“œ ë§¤í•‘ì„ í†µí•œ ë‹¤ì¤‘ ê²€ìƒ‰
for activity in activities:
    keywords = ACTIVITY_KEYWORDS[activity]
    for keyword in keywords:
        # í˜ì´ì§€ë„¤ì´ì…˜ì„ í†µí•œ ì „ì²´ ê²°ê³¼ ìˆ˜ì§‘
        for page in range(1, 4):  # ìµœëŒ€ 3í˜ì´ì§€
            places = await search_by_keyword(keyword, rect, page)
```

#### ì¤‘ë³µ ì œê±° ë¡œì§
```python
# ID ê¸°ë°˜ + ìœ„ì¹˜+ì´ë¦„ ê¸°ë°˜ ì´ì¤‘ ì¤‘ë³µ ì œê±°
seen_ids = set()
seen_locations = set()  # (name, phone) ì¡°í•©

for place in places:
    if place["id"] in seen_ids:
        continue
    location_key = (place["name"], place.get("phone", ""))
    if location_key in seen_locations:
        continue
    # ìœ íš¨í•œ ì¥ì†Œë¡œ ì¶”ê°€
```

---

## ğŸ—ºï¸ ì§€ë„ ì‹œê°í™” ì„¤ê³„

### ì§€ë„ ì‹œê°í™” ì•„í‚¤í…ì²˜

```mermaid
graph TD
    subgraph "ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤"
        A["ì§€ì—­ ì„ íƒ<br/>RegionFilter"]
        B["í™œë™ ì„ íƒ<br/>ActivityFilter"]
        C["ì§€ë„ ì¸í„°ë™ì…˜<br/>MapView"]
    end
    
    subgraph "ì§€ë„ ë ˆì´ì–´"
        D["í´ë¦¬ê³¤ ë ˆì´ì–´<br/>ì‹œ/ë„ ê²½ê³„"]
        E["ë§ˆì»¤ ë ˆì´ì–´<br/>í•´ì–‘ê´€ì¸¡ì†Œ"]
        F["ë§ˆì»¤ ë ˆì´ì–´<br/>ì‚¬ì—…ì¥"]
        G["ì •ë³´ì°½<br/>InfoWindow"]
    end
    
    subgraph "ë°ì´í„° ì†ŒìŠ¤"
        H["GeoJSON<br/>korea_sido_simple.json"]
        I["KMA API<br/>í•´ì–‘ ê´€ì¸¡ ë°ì´í„°"]
        J["Kakao API<br/>ì‚¬ì—…ì¥ ë°ì´í„°"]
    end
    
    A --> D
    B --> E
    B --> F
    C --> G
    
    H --> D
    I --> E
    J --> F
    
    D -->|í´ë¦­ ì´ë²¤íŠ¸| A
    E -->|í´ë¦­ ì´ë²¤íŠ¸| G
    F -->|í´ë¦­ ì´ë²¤íŠ¸| G
    
    style A fill:#e1f5fe
    style B fill:#e1f5fe
    style C fill:#e1f5fe
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#fff3e0
    style H fill:#f3e5f5
    style I fill:#f3e5f5
    style J fill:#f3e5f5
```

### ë§ˆì»¤ ì‹œìŠ¤í…œ êµ¬ì¡°

```mermaid
graph LR
    subgraph "í™œë™ ì„ íƒ"
        A["marine_info<br/>í•´ì–‘ì •ë³´"]
        B["surfing<br/>ì„œí•‘"]
        C["scuba<br/>ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™"]
        D["kayak<br/>ì¹´ì•½/SUP"]
        E["yacht<br/>ìš”íŠ¸/ì„¸ì¼ë§"]
    end
    
    subgraph "ë§ˆì»¤ ìŠ¤íƒ€ì¼"
        F["ê¸°ë³¸ ë§ˆì»¤<br/>í•´ì–‘ê´€ì¸¡ì†Œ"]
        G["íŒŒë€ìƒ‰ ë§ˆì»¤<br/>ì„œí•‘"]
        H["ë¹¨ê°„ìƒ‰ ë§ˆì»¤<br/>ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™"]
        I["ë…¸ë€ìƒ‰ ë§ˆì»¤<br/>ì¹´ì•½/SUP"]
        J["ë³´ë¼ìƒ‰ ë§ˆì»¤<br/>ìš”íŠ¸/ì„¸ì¼ë§"]
    end
    
    subgraph "ì •ë³´ì°½ ë‚´ìš©"
        K["ìˆ˜ì˜¨, íŒŒê³ , ì¡°ë¥˜<br/>ê´€ì¸¡ì‹œê°, ìœ„ì¹˜"]
        L["ì‚¬ì—…ì¥ëª…, ì¹´í…Œê³ ë¦¬<br/>ì£¼ì†Œ, ì „í™”ë²ˆí˜¸<br/>ì¹´ì¹´ì˜¤ë§µ ë§í¬"]
    end
    
    A --> F
    B --> G
    C --> H
    D --> I
    E --> J
    
    F --> K
    G --> L
    H --> L
    I --> L
    J --> L
    
    style A fill:#e8f5e8
    style F fill:#81c784
    style K fill:#c8e6c9
    style L fill:#ffecb3
```

### 1. ì§€ì—­ë³„ í´ë¦¬ê³¤ ì‹œê°í™”

#### GeoJSON ë°ì´í„° êµ¬ì¡°
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": { "name": "ì„œìš¸íŠ¹ë³„ì‹œ" },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[ê²½ë„, ìœ„ë„], ...]]
      }
    }
  ]
}
```

#### í´ë¦¬ê³¤ ìƒí˜¸ì‘ìš©
```javascript
// ì§€ì—­ ì„ íƒ ì‹œ ìŠ¤íƒ€ì¼ ë³€ê²½
const handleRegionSelect = (regionName) => {
    // ëª¨ë“  í´ë¦¬ê³¤ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë¡œ ì´ˆê¸°í™”
    Object.values(polygonsRef.current).forEach(polygon => {
        polygon.setOptions({
            strokeWeight: 2,
            strokeColor: "#4287f5",
            fillOpacity: 0.1
        });
    });
    
    // ì„ íƒëœ í´ë¦¬ê³¤ í•˜ì´ë¼ì´íŠ¸
    const selectedPolygon = polygonsRef.current[regionName];
    selectedPolygon.setOptions({
        strokeWeight: 4,
        strokeColor: "#ff6b6b",
        fillOpacity: 0.3
    });
};
```

### 2. ë§ˆì»¤ ì‹œìŠ¤í…œ ì„¤ê³„

#### í™œë™ë³„ ë§ˆì»¤ ìƒ‰ìƒ êµ¬ë¶„
```javascript
const getMarkerImageSrc = (activity) => {
    const markerColors = {
        surfing: "marker_blue.png",      // íŒŒë€ìƒ‰ - ì„œí•‘
        scuba: "marker_red.png",         // ë¹¨ê°„ìƒ‰ - ìŠ¤ì¿ ë²„ë‹¤ì´ë¹™
        snorkel: "marker_orange.png",    // ì£¼í™©ìƒ‰ - ìŠ¤ë…¸í´ë§
        kayak: "marker_yellow.png",      // ë…¸ë€ìƒ‰ - ì¹´ì•½/SUP
        yacht: "marker_purple.png",      // ë³´ë¼ìƒ‰ - ìš”íŠ¸/ì„¸ì¼ë§
        // ... ê¸°íƒ€ í™œë™ë³„ ìƒ‰ìƒ
    };
    return markerColors[activity] || "markerStar.png";
};
```

#### ì •ë³´ì°½ (InfoWindow) ì„¤ê³„
```javascript
// í•´ì–‘ ê´€ì¸¡ì†Œ ì •ë³´ì°½
const marineInfoHTML = `
    <div style="min-width:260px; background:#fff; border-radius:8px;">
        <div style="padding:10px; background:#f8f9fa;">
            <div style="font-weight:600;">${stationName}</div>
        </div>
        <div style="padding:10px;">
            <div>ìˆ˜ì˜¨(SST): ${sst} â„ƒ</div>
            <div>ìœ ì˜íŒŒê³ : ${wave_height} m</div>
            <div>ì¡°ë¥˜ì†ë„: ${current_speed} m/s</div>
            <div>ê´€ì¸¡ì‹œê°: ${observed_at}</div>
        </div>
    </div>`;

// ì‚¬ì—…ì¥ ì •ë³´ì°½
const placeInfoHTML = `
    <div style="min-width:280px; background:#fff; border-radius:8px;">
        <div style="padding:12px; background:#f8f9fa;">
            <div style="font-weight:600;">${placeName}</div>
            <div style="font-size:11px;">${activityLabel}</div>
        </div>
        <div style="padding:12px;">
            <div>ì¹´í…Œê³ ë¦¬: ${category}</div>
            <div>ì£¼ì†Œ: ${address}</div>
            <div>ì „í™”ë²ˆí˜¸: ${phone}</div>
            <a href="${place_url}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a>
        </div>
    </div>`;
```

---

## ğŸ”’ ë³´ì•ˆ ë° ì¸ì¦

### 1. API í‚¤ ê´€ë¦¬

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# backend/.env
KMA_API_KEY=your_kma_api_key_here
KHOA_API_KEY=your_khoa_api_key_here
KAKAO_API_KEY=your_kakao_rest_api_key_here
VITE_KAKAO_APPKEY=your_kakao_javascript_key_here
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# frontend/.env
VITE_BACKEND_URL=http://localhost:8000
VITE_KAKAO_APPKEY=your_kakao_api_key_here
```

#### CORS ì„¤ì •
```python
# main.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=ALLOWED_ORIGINS or ["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 2. API ì œí•œ ë° ì—ëŸ¬ ì²˜ë¦¬

#### Rate Limiting ëŒ€ì‘
```python
# kakao_local_client.py
except httpx.HTTPStatusError as e:
    if e.response.status_code == 429:
        logger.warning("Rate limit exceeded, waiting longer...")
        await asyncio.sleep(5.0)  # 5ì´ˆ ëŒ€ê¸° í›„ ì¬ì‹œë„
        continue
```

#### ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ
```python
# ë‹¨ê³„ë³„ fallback ì²˜ë¦¬
try:
    # 1ì°¨: ì •ìƒ API í˜¸ì¶œ
    response = await client.get(url, params=params)
    response.raise_for_status()
    return response.json()
except httpx.HTTPStatusError:
    # 2ì°¨: ì—ëŸ¬ ìƒíƒœ ì½”ë“œë³„ ì²˜ë¦¬
    if response.status_code == 401:
        raise HTTPException(status_code=500, detail="API key invalid")
except Exception as e:
    # 3ì°¨: ê¸°ë³¸ ì—ëŸ¬ ì‘ë‹µ
    return {"error": str(e), "data": [], "count": 0}
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### 1. í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”

#### ì§€ë„ ë Œë”ë§ ìµœì í™”
```javascript
// ë§ˆì»¤ í´ëŸ¬ìŠ¤í„°ë§ ë° ì„±ëŠ¥ ìµœì í™”
useEffect(() => {
    // ê¸°ì¡´ ë§ˆì»¤ ì¼ê´„ ì œê±°
    markersRef.current.forEach(marker => marker.setMap(null));
    markersRef.current = [];
    
    // í™”ë©´ì— ë³´ì´ëŠ” ì˜ì—­ì˜ ë§ˆì»¤ë§Œ ë Œë”ë§
    const bounds = mapRef.current.getBounds();
    const visibleStations = stations.filter(station => 
        bounds.contain(new kakao.maps.LatLng(station.lat, station.lon))
    );
    
    // ë§ˆì»¤ ìƒì„± ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    visibleStations.forEach(station => {
        const marker = new kakao.maps.Marker({
            position: new kakao.maps.LatLng(station.lat, station.lon),
            title: station.station_name
        });
        marker.setMap(mapRef.current);
        markersRef.current.push(marker);
    });
}, [stations, mapBounds]);
```

#### API í˜¸ì¶œ ìµœì í™”
```javascript
// ë””ë°”ìš´ì‹±ì„ í†µí•œ API í˜¸ì¶œ ìµœì í™”
const debouncedFetchPlaces = useCallback(
    debounce((activity) => {
        if (mapRef.current) {
            fetchPlaces(activity);
        }
    }, 500),
    []
);
```

### 2. ë°±ì—”ë“œ ìµœì í™”

#### ë¹„ë™ê¸° ì²˜ë¦¬
```python
# httpxë¥¼ í†µí•œ ë¹„ë™ê¸° HTTP ìš”ì²­
async def fetch_all_stations(client: httpx.AsyncClient) -> List[Dict]:
    try:
        response = await client.get(url, params=params, timeout=15)
        response.raise_for_status()
        return _parse_sea_obs_all(response.text)
    except Exception as e:
        logger.error(f"Error fetching stations: {e}")
        return []
```

#### ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±
```python
# ì œë„ˆë ˆì´í„°ë¥¼ í†µí•œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ì²˜ë¦¬
def _parse_sea_obs_all(text: str) -> List[Dict[str, Any]]:
    lines = (ln for ln in text.splitlines() if ln.strip() and not ln.startswith("#"))
    data_lines = (ln for ln in lines if "," in ln)
    
    stations = []
    for row in data_lines:
        # ê° í–‰ì„ ì¦‰ì‹œ ì²˜ë¦¬í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì†Œí™”
        station = parse_station_row(row)
        if station:
            stations.append(station)
    
    return stations
```

---

## ğŸš€ ë°°í¬ ë° ìš´ì˜

### 1. ê°œë°œ í™˜ê²½ ì„¤ì •

#### ë°±ì—”ë“œ ì‹¤í–‰
```bash
cd backend
python3.13 -m venv .venv
.\.venv\Scripts\Activate.ps1  # Windows
source .venv/bin/activate     # Linux/Mac
pip install -r requirements.txt
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
```bash
cd frontend
npm install
npm run dev  # http://localhost:5173
```

### 2. í”„ë¡œë•ì…˜ ë°°í¬ ê³ ë ¤ì‚¬í•­

#### ë°±ì—”ë“œ ë°°í¬
```python
# í”„ë¡œë•ì…˜ ì„¤ì •
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

#### í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
```bash
npm run build
npm run preview --port 5173
```

#### í™˜ê²½ë³„ ì„¤ì •
```bash
# ê°œë°œí™˜ê²½
VITE_BACKEND_URL=http://localhost:8000

# í”„ë¡œë•ì…˜í™˜ê²½
VITE_BACKEND_URL=https://api.yourdomain.com
```

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### 1. ë¡œê¹… ì „ëµ

#### ë°±ì—”ë“œ ë¡œê¹…
```python
# êµ¬ì¡°í™”ëœ ë¡œê¹…
import logging
logger = logging.getLogger(__name__)

# API ìš”ì²­/ì‘ë‹µ ë¡œê¹…
logger.info(f"ğŸ” Searching places with rect: {rect}, activities: {activity_list}")
logger.info(f"âœ… Found {len(places)} places")
logger.error(f"âŒ Search failed: {str(e)}")
```

#### í”„ë¡ íŠ¸ì—”ë“œ ë¡œê¹…
```javascript
// ê°œë°œ í™˜ê²½ì—ì„œì˜ ìƒì„¸ ë¡œê¹…
console.log(`ğŸ” Searching places for activity: ${activity}, rect: ${rect}`);
console.log(`âœ… Loaded ${placesData.length} places for activity: ${activity}`);
console.error("âŒ Failed to fetch places:", error);
```

### 2. ì—ëŸ¬ ëª¨ë‹ˆí„°ë§

#### API ì—ëŸ¬ ì¶”ì 
```python
# ìƒì„¸í•œ ì—ëŸ¬ ì»¨í…ìŠ¤íŠ¸ ì œê³µ
except Exception as e:
    print(f"âŒ Search failed: {str(e)}")
    print(f"âŒ Error type: {type(e).__name__}")
    import traceback
    print(f"âŒ Traceback: {traceback.format_exc()}")
    raise HTTPException(status_code=500, detail=f"Search failed: {str(e)}")
```

---

## ğŸ”§ í™•ì¥ ê³„íš

### 1. ê¸°ëŠ¥ í™•ì¥

#### AI ì±—ë´‡ ê³ ë„í™”
- ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ë§ì¶¤ ì¶”ì²œ
- ë‚ ì”¨ ì˜ˆë³´ ì—°ë™
- ì‚¬ìš©ì ì„ í˜¸ë„ í•™ìŠµ

#### ì¶”ê°€ ë°ì´í„° ì†ŒìŠ¤
- í•´ì–‘ìˆ˜ì‚°ë¶€ API ì—°ë™
- ë¯¼ê°„ í•´ì–‘ë ˆì €ì—…ì²´ DB ì—°ë™
- ì‚¬ìš©ì ë¦¬ë·° ì‹œìŠ¤í…œ

### 2. ê¸°ìˆ ì  ê°œì„ 

#### ì„±ëŠ¥ ìµœì í™”
- Redis ìºì‹± ë„ì…
- CDN ì ìš©
- ì´ë¯¸ì§€ ìµœì í™”

#### ëª¨ë°”ì¼ ì§€ì›
- PWA (Progressive Web App) êµ¬í˜„
- ë°˜ì‘í˜• ë””ìì¸ ê°œì„ 
- í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì›

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### API ë¬¸ì„œ
- [ê¸°ìƒì²­ OpenAPI](https://apihub.kma.go.kr/)
- [ì¹´ì¹´ì˜¤ë§µ API](https://apis.map.kakao.com/)
- [êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì› API](https://www.khoa.go.kr/)

### ê¸°ìˆ  ë¬¸ì„œ
- [FastAPI ê³µì‹ ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [React ê³µì‹ ë¬¸ì„œ](https://react.dev/)
- [Vite ê³µì‹ ë¬¸ì„œ](https://vitejs.dev/)

### ê°œë°œ ê°€ì´ë“œ
- `README.md`: í”„ë¡œì íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ
- `TROUBLESHOOTING.md`: ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

---

*ì´ ê¸°ìˆ  ì„¤ê³„ë„ëŠ” í”„ë¡œì íŠ¸ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë°˜ì˜í•˜ë©°, ê°œë°œ ì§„í–‰ì— ë”°ë¼ ì—…ë°ì´íŠ¸ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
