# 사용자 인증 시스템 구현 작업 목록

## 1. 개발 환경 설정

- [ ] 1.1 Docker MySQL 환경 설정
  - Docker Compose 파일 생성하여 MySQL 컨테이너 구성
  - 데이터베이스 초기화 스크립트 작성
  - DBeaver 연결 설정 가이드 작성
  - _요구사항: 6.1_

- [ ] 1.2 백엔드 의존성 추가
  - requirements.txt에 인증 관련 패키지 추가 (aiomysql, bcrypt, python-jose[cryptography], passlib)
  - 환경변수 설정 (.env 파일에 JWT_SECRET_KEY, DATABASE_URL 추가)
  - _요구사항: 6.1, 7.2_

- [ ] 1.3 프론트엔드 의존성 추가
  - package.json에 라우팅 및 폼 관련 패키지 추가 (react-router-dom)
  - 환경변수 설정 확인
  - _요구사항: 8.1, 8.2_

## 2. 데이터베이스 구조 구현

- [ ] 2.1 데이터베이스 스키마 생성
  - users 테이블 생성 스크립트 작성 (init.sql)
  - refresh_tokens 테이블 생성 스크립트 작성
  - 인덱스 및 외래키 제약조건 설정
  - _요구사항: 6.1, 6.3_

- [ ] 2.2 데이터베이스 연결 서비스 구현
  - backend/app/database.py 파일 생성
  - aiomysql 커넥션 풀 설정
  - 데이터베이스 연결 관리 클래스 작성
  - 연결 상태 확인 및 에러 처리 구현
  - _요구사항: 6.1, 6.3_

## 3. 백엔드 인증 서비스 구현

- [ ] 3.1 Pydantic 스키마 모델 생성
  - backend/app/schemas/auth.py 파일 생성
  - UserRegister, UserLogin, UserResponse, TokenResponse 스키마 정의
  - 입력 검증 및 응답 모델 구현
  - _요구사항: 1.1, 2.1, 3.1_

- [ ] 3.2 JWT 토큰 서비스 구현
  - backend/app/services/jwt_service.py 파일 생성
  - JWT 토큰 생성 및 검증 클래스 작성
  - Access Token (15분) 및 Refresh Token (7일) 생성 로직
  - 토큰 만료 및 유효성 검증 구현
  - _요구사항: 3.1, 3.2, 3.3_

- [ ] 3.3 비밀번호 해시 서비스 구현
  - backend/app/services/password_service.py 파일 생성
  - bcrypt를 사용한 비밀번호 해시화 함수 작성
  - 비밀번호 검증 함수 구현
  - 보안 강도 설정 (최소 12 rounds)
  - _요구사항: 6.2, 7.1_

- [ ] 3.4 사용자 데이터베이스 서비스 구현
  - backend/app/services/user_service.py 파일 생성
  - 사용자 생성, 조회, 수정 함수 작성
  - 이메일 중복 검사 로직 구현
  - Refresh Token 저장 및 검증 함수 작성
  - SQL 인젝션 방지를 위한 파라미터화된 쿼리 사용
  - _요구사항: 1.2, 2.3, 3.4, 6.3_

## 4. 백엔드 API 엔드포인트 구현

- [ ] 4.1 회원가입 API 구현
  - POST /auth/register 엔드포인트 작성
  - 입력 데이터 검증 (이메일 형식, 비밀번호 길이)
  - 이메일 중복 검사 및 에러 처리
  - 사용자 계정 생성 로직 구현
  - _요구사항: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ] 4.2 로그인 API 구현
  - POST /auth/login 엔드포인트 작성
  - 사용자 인증 및 비밀번호 검증
  - JWT 토큰 생성 및 반환
  - 로그인 실패 횟수 추적 및 계정 잠금 로직
  - _요구사항: 2.1, 2.3, 7.5_

- [ ] 4.3 토큰 갱신 API 구현
  - POST /auth/refresh 엔드포인트 작성
  - Refresh Token 검증 로직
  - 새로운 Access Token 생성 및 반환
  - 만료된 토큰 처리
  - _요구사항: 3.4, 3.5, 4.2_

- [ ] 4.4 로그아웃 API 구현
  - POST /auth/logout 엔드포인트 작성
  - Refresh Token 무효화 로직
  - 데이터베이스에서 토큰 삭제
  - _요구사항: 5.4_

## 5. 백엔드 사용자 관리 API 구현

- [ ] 5.1 사용자 정보 조회 API 구현
  - GET /users/me 엔드포인트 작성
  - JWT 토큰 기반 사용자 인증 미들웨어
  - 사용자 프로필 정보 반환
  - _요구사항: 5.1_

- [ ] 5.2 사용자 정보 수정 API 구현
  - PUT /users/me 엔드포인트 작성
  - 이름 수정 기능 구현
  - 입력 데이터 검증 및 업데이트
  - _요구사항: 5.2_

- [ ] 5.3 비밀번호 변경 API 구현
  - PUT /users/me/password 엔드포인트 작성
  - 현재 비밀번호 확인 로직
  - 새 비밀번호 해시화 및 저장
  - _요구사항: 5.3_

## 6. 백엔드 보안 및 미들웨어 구현

- [ ] 6.1 인증 미들웨어 구현
  - JWT 토큰 검증 의존성 함수 작성
  - 보호된 라우트에 대한 인증 확인
  - 401 Unauthorized 응답 처리
  - _요구사항: 3.3, 4.4_

- [ ] 6.2 CORS 및 보안 헤더 설정
  - FastAPI CORS 미들웨어 설정
  - 보안 헤더 추가 (HSTS, X-Frame-Options 등)
  - 허용된 오리진 설정
  - _요구사항: 7.3_

- [ ] 6.3 에러 처리 및 로깅 구현
  - 커스텀 예외 클래스 작성
  - 전역 에러 핸들러 구현
  - 민감한 정보 로깅 방지 로직
  - _요구사항: 7.4_

## 7. 프론트엔드 라우팅 및 레이아웃 구현

- [ ] 7.1 React Router 설정
  - 라우팅 구조 설정 (/, /login, /register, /profile)
  - 보호된 라우트 컴포넌트 작성
  - 인증 상태에 따른 리다이렉션 로직
  - _요구사항: 1.5, 2.2_

- [ ] 7.2 인증 컨텍스트 구현
  - AuthContext 및 AuthProvider 작성
  - 전역 인증 상태 관리
  - 토큰 저장 및 관리 로직
  - _요구사항: 2.4, 4.1, 4.2_

- [ ] 7.3 헤더 컴포넌트 업데이트
  - 기존 Header 컴포넌트에 인증 상태 표시 추가
  - 로그인/로그아웃 버튼 구현
  - 사용자 이름 표시 기능
  - _요구사항: 8.4, 8.5_

## 8. 프론트엔드 인증 페이지 구현

- [ ] 8.1 회원가입 페이지 구현
  - 회원가입 폼 컴포넌트 작성
  - 입력 필드 검증 (이메일, 비밀번호, 비밀번호 확인)
  - 실시간 유효성 검사 및 오류 메시지 표시
  - 회원가입 API 호출 및 성공/실패 처리
  - _요구사항: 8.1, 8.3_

- [ ] 8.2 로그인 페이지 구현
  - 로그인 폼 컴포넌트 작성
  - 이메일 및 비밀번호 입력 필드
  - 로그인 API 호출 및 토큰 저장
  - 회원가입 페이지 링크 추가
  - _요구사항: 8.2, 8.3_

- [ ] 8.3 마이페이지 구현
  - 사용자 프로필 표시 컴포넌트 작성
  - 이름 수정 기능 구현
  - 비밀번호 변경 폼 구현
  - 로그아웃 기능 구현
  - _요구사항: 5.1, 5.2, 5.3, 5.4_

## 9. 프론트엔드 API 클라이언트 구현

- [ ] 9.1 인증 API 클라이언트 구현
  - 회원가입, 로그인, 로그아웃 API 함수 작성
  - 토큰 갱신 API 함수 구현
  - 에러 처리 및 응답 데이터 파싱
  - _요구사항: 1.1, 2.1, 3.4_

- [ ] 9.2 HTTP 인터셉터 구현
  - Axios 요청 인터셉터에 토큰 자동 추가
  - 응답 인터셉터에 401 오류 처리 및 토큰 갱신
  - 자동 재시도 로직 구현
  - _요구사항: 4.4_

- [ ] 9.3 자동 토큰 갱신 구현
  - 토큰 만료 시간 추적 로직
  - 5분 전 자동 갱신 타이머 설정
  - 갱신 실패 시 로그아웃 처리
  - _요구사항: 4.1, 4.3_

## 10. 통합 테스트 및 최적화

- [ ] 10.1 백엔드 단위 테스트 작성
  - 인증 API 엔드포인트 테스트
  - JWT 토큰 서비스 테스트
  - 데이터베이스 서비스 테스트
  - _요구사항: 모든 백엔드 요구사항_

- [ ] 10.2 프론트엔드 컴포넌트 테스트 작성
  - 로그인/회원가입 폼 테스트
  - 인증 컨텍스트 테스트
  - 라우팅 및 보호된 라우트 테스트
  - _요구사항: 모든 프론트엔드 요구사항_

- [ ] 10.3 통합 테스트 및 E2E 테스트
  - 전체 인증 플로우 테스트
  - 토큰 갱신 시나리오 테스트
  - 보안 취약점 검증
  - _요구사항: 3.3, 3.4, 3.5, 4.4_

## 11. 문서화 및 배포 준비

- [ ] 11.1 README.md 업데이트
  - Docker MySQL 설정 가이드 추가
  - DBeaver 연결 방법 설명
  - 환경변수 설정 가이드 업데이트
  - 인증 시스템 사용법 설명
  - _요구사항: 6.1_

- [ ] 11.2 API 문서화
  - FastAPI 자동 문서화 확인 및 보완
  - 인증 엔드포인트 예제 추가
  - 에러 응답 코드 문서화
  - _요구사항: 모든 API 요구사항_

- [ ] 11.3 보안 체크리스트 검증
  - 비밀번호 해시화 확인
  - JWT 토큰 보안 설정 검증
  - CORS 정책 확인
  - SQL 인젝션 방지 검증
  - _요구사항: 7.1, 7.2, 7.3, 6.3_